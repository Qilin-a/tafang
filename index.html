<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Áé∞‰ª£Â°îÈò≤Ê∏∏Êàè - Modern Tower Defense</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="game-container">
        <!-- Ê∏∏ÊàèÊ†áÈ¢ò -->
        <header class="game-header">
            <h1 class="game-title">
                <i class="fas fa-chess-rook"></i>
                Áé∞‰ª£Â°îÈò≤
                <span class="subtitle">Modern Tower Defense</span>
            </h1>
        </header>

        <!-- Ê∏∏Êàè‰∏ªÁïåÈù¢ -->
        <main class="game-main">
            <!-- Ê∏∏Êàè‰ø°ÊÅØÈù¢Êùø -->
            <div class="game-info">
                <div class="info-panel">
                    <!-- ËµÑÊ∫êÁä∂ÊÄÅ -->
                    <div class="resource-section">
                        <div class="resource-item">
                            <i class="fas fa-coins"></i>
                            <span class="label">ÈáëÂ∏Å</span>
                            <span class="value" id="gold">500</span>
                        </div>
                        <div class="resource-item">
                            <i class="fas fa-heart"></i>
                            <span class="label">ÁîüÂëΩ</span>
                            <span class="value" id="lives">20</span>
                        </div>
                        <div class="resource-item">
                            <i class="fas fa-trophy"></i>
                            <span class="label">ÂàÜÊï∞</span>
                            <span class="value" id="score">0</span>
                        </div>
                    </div>

                    <!-- Ê≥¢Ê¨°‰ø°ÊÅØ -->
                    <div class="wave-section">
                        <div class="wave-info">
                            <div class="wave-current">
                                <span class="label">ÂΩìÂâçÊ≥¢Ê¨°</span>
                                <span class="value" id="current-wave">1</span>
                            </div>
                            <div class="wave-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="wave-progress"></div>
                                </div>
                                <span class="progress-text" id="enemies-remaining">0/0</span>
                            </div>
                        </div>
                        <button class="wave-btn" id="start-wave">
                            <i class="fas fa-play"></i>
                            ÂºÄÂßãÊ≥¢Ê¨°
                        </button>
                    </div>

                    <!-- Ê∏∏ÊàèÈÄüÂ∫¶ÊéßÂà∂ -->
                    <div class="speed-section">
                        <div class="speed-controls">
                            <button class="speed-btn" id="pause-btn">
                                <i class="fas fa-pause"></i>
                            </button>
                            <button class="speed-btn active" id="normal-speed" data-speed="1">
                                <i class="fas fa-play"></i>
                                1x
                            </button>
                            <button class="speed-btn" id="fast-speed" data-speed="2">
                                <i class="fas fa-forward"></i>
                                2x
                            </button>
                            <button class="speed-btn" id="ultra-speed" data-speed="4">
                                <i class="fas fa-fast-forward"></i>
                                4x
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ê∏∏ÊàèÁîªÂ∏ÉÂå∫Âüü -->
            <div class="game-canvas-container">
                <canvas id="game-canvas" width="800" height="600"></canvas>
                
                <!-- Ê∏∏ÊàèË¶ÜÁõñÂ±Ç -->
                <div class="game-overlay hidden" id="game-overlay">
                    <div class="overlay-content">
                        <div class="game-logo">
                            <i class="fas fa-chess-rook"></i>
                            <h2>Áé∞‰ª£Â°îÈò≤</h2>
                        </div>
                        
                        <!-- ‰∏ªËèúÂçï -->
                        <div class="game-menu" id="main-menu">
                            <button class="menu-btn start-btn" id="start-game">
                                <i class="fas fa-play"></i>
                                ÂºÄÂßãÊ∏∏Êàè
                            </button>
                            <button id="show-settings" class="btn btn-secondary">
                                <i class="fas fa-cog"></i> ËÆæÁΩÆ
                            </button>
                            <button id="show-instructions" class="btn btn-secondary">
                                <i class="fas fa-question-circle"></i> ËØ¥Êòé
                            </button>
                            <button id="show-achievements" class="btn btn-secondary">
                                <i class="fas fa-trophy"></i> ÊàêÂ∞±
                            </button>
                            <button id="show-leaderboard" class="btn btn-secondary">
                                <i class="fas fa-crown"></i> ÊéíË°åÊ¶ú
                            </button>
                            <button id="open-level-editor" class="btn btn-secondary">
                                <i class="fas fa-edit"></i> ÂÖ≥Âç°ÁºñËæëÂô®
                            </button>
                        </div>
                        
                        <!-- Ê∏∏ÊàèÁªìÊùüÁïåÈù¢ -->
                        <div class="game-over-menu hidden" id="game-over-menu">
                            <h2 class="game-over-title" id="game-result">Ê∏∏ÊàèÁªìÊùü!</h2>
                            <div class="final-stats">
                                <p>ÊúÄÁªàÂàÜÊï∞: <span id="final-score">0</span></p>
                                <p>Â≠òÊ¥ªÊ≥¢Ê¨°: <span id="final-wave">0</span></p>
                                <p class="new-record hidden" id="new-record">üéâ Êñ∞Á∫™ÂΩï!</p>
                            </div>
                            <div class="game-over-buttons">
                                <button class="menu-btn restart-btn" id="restart-game">
                                    <i class="fas fa-redo"></i>
                                    ÈáçÊñ∞ÂºÄÂßã
                                </button>
                                <button class="menu-btn" id="back-to-menu">
                                    <i class="fas fa-home"></i>
                                    ËøîÂõû‰∏ªËèúÂçï
                                </button>
                            </div>
                        </div>

                        <!-- ÊöÇÂÅúÁïåÈù¢ -->
                        <div class="pause-menu hidden" id="pause-menu">
                            <h2>Ê∏∏ÊàèÊöÇÂÅú</h2>
                            <div class="pause-buttons">
                                <button class="menu-btn" id="resume-game">
                                    <i class="fas fa-play"></i>
                                    ÁªßÁª≠Ê∏∏Êàè
                                </button>
                                <button class="menu-btn" id="pause-restart">
                                    <i class="fas fa-redo"></i>
                                    ÈáçÊñ∞ÂºÄÂßã
                                </button>
                                <button class="menu-btn" id="pause-menu-btn">
                                    <i class="fas fa-home"></i>
                                    ‰∏ªËèúÂçï
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Â°î‰ø°ÊÅØÈù¢Êùø -->
                <div class="tower-info-panel hidden" id="tower-info">
                    <div class="tower-details">
                        <h3 id="tower-name">Â°î‰ø°ÊÅØ</h3>
                        <div class="tower-stats">
                            <div class="stat-item">
                                <span class="stat-label">‰º§ÂÆ≥:</span>
                                <span class="stat-value" id="tower-damage">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Â∞ÑÁ®ã:</span>
                                <span class="stat-value" id="tower-range">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">ÊîªÈÄü:</span>
                                <span class="stat-value" id="tower-speed">0</span>
                            </div>
                        </div>
                        <div class="tower-actions">
                            <button class="action-btn upgrade-btn" id="upgrade-tower">
                                <i class="fas fa-arrow-up"></i>
                                ÂçáÁ∫ß (<span id="upgrade-cost">0</span>)
                            </button>
                            <button class="action-btn sell-btn" id="sell-tower">
                                <i class="fas fa-trash"></i>
                                Âá∫ÂîÆ (+<span id="sell-value">0</span>)
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Â°îÂª∫ËÆæÈù¢Êùø -->
            <div class="tower-panel">
                <div class="panel-header">
                    <h3>
                        <i class="fas fa-hammer"></i>
                        Â°îÂª∫ËÆæ
                    </h3>
                </div>
                <div class="tower-types">
                    <div class="tower-type" id="basic-tower" data-type="basic">
                        <div class="tower-icon">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <div class="tower-details">
                            <h4>Âü∫Á°ÄÂ°î</h4>
                            <p class="tower-desc">Âπ≥Ë°°ÁöÑÊîªÂáªÂíåÂ∞ÑÁ®ã</p>
                            <div class="tower-cost">
                                <i class="fas fa-coins"></i>
                                <span>50</span>
                            </div>
                        </div>
                    </div>

                    <div class="tower-type" id="cannon-tower" data-type="cannon">
                        <div class="tower-icon">
                            <i class="fas fa-bomb"></i>
                        </div>
                        <div class="tower-details">
                            <h4>Âä†ÂÜúÁÇÆ</h4>
                            <p class="tower-desc">È´ò‰º§ÂÆ≥ÔºåÊ∫ÖÂ∞ÑÊîªÂáª</p>
                            <div class="tower-cost">
                                <i class="fas fa-coins"></i>
                                <span>100</span>
                            </div>
                        </div>
                    </div>

                    <div class="tower-type" id="laser-tower" data-type="laser">
                        <div class="tower-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="tower-details">
                            <h4>ÊøÄÂÖâÂ°î</h4>
                            <p class="tower-desc">Âø´ÈÄüÊîªÂáªÔºåËÉΩÈáè‰º§ÂÆ≥</p>
                            <div class="tower-cost">
                                <i class="fas fa-coins"></i>
                                <span>80</span>
                            </div>
                        </div>
                    </div>

                    <div class="tower-type" id="freeze-tower" data-type="freeze">
                        <div class="tower-icon">
                            <i class="fas fa-snowflake"></i>
                        </div>
                        <div class="tower-details">
                            <h4>ÂÜ∞ÂÜªÂ°î</h4>
                            <p class="tower-desc">ÂáèÈÄüÊïå‰∫∫ÔºåËæÖÂä©ÊîªÂáª</p>
                            <div class="tower-cost">
                                <i class="fas fa-coins"></i>
                                <span>60</span>
                            </div>
                        </div>
                    </div>

                    <div class="tower-type" id="sniper-tower" data-type="sniper">
                        <div class="tower-icon">
                            <i class="fas fa-crosshairs"></i>
                        </div>
                        <div class="tower-details">
                            <h4>ÁãôÂáªÂ°î</h4>
                            <p class="tower-desc">Ë∂ÖËøúÂ∞ÑÁ®ãÔºåÈ´òÁ≤æÂ∫¶</p>
                            <div class="tower-cost">
                                <i class="fas fa-coins"></i>
                                <span>120</span>
                            </div>
                        </div>
                    </div>

                    <div class="tower-type" id="poison-tower" data-type="poison">
                        <div class="tower-icon">
                            <i class="fas fa-skull"></i>
                        </div>
                        <div class="tower-details">
                            <h4>ÊØíÊ∞îÂ°î</h4>
                            <p class="tower-desc">ÊåÅÁª≠‰º§ÂÆ≥ÔºåËåÉÂõ¥ÊîªÂáª</p>
                            <div class="tower-cost">
                                <i class="fas fa-coins"></i>
                                <span>90</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Ê∏∏ÊàèËØ¥ÊòéÂºπÁ™ó -->
        <div class="modal hidden" id="instructions-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Ê∏∏ÊàèËØ¥Êòé</h3>
                    <button class="close-btn" id="close-instructions">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="instructions">
                        <h4>üéØ Ê∏∏ÊàèÁõÆÊ†á</h4>
                        <p>Âª∫ÈÄ†Èò≤Âæ°Â°îÈòªÊ≠¢Êïå‰∫∫Âà∞ËææÁªàÁÇπÔºå‰øùÊä§‰Ω†ÁöÑÂü∫Âú∞ÔºÅ</p>
                        
                        <h4>üèóÔ∏è Âª∫ÈÄ†Â°î</h4>
                        <ul>
                            <li>ÁÇπÂáªÂè≥‰æßÈù¢ÊùøÈÄâÊã©Â°îÁ±ªÂûã</li>
                            <li>Âú®Âú∞ÂõæÁ©∫Âú∞‰∏äÁÇπÂáªÊîæÁΩÆ</li>
                            <li>ÊØèÁßçÂ°îÈÉΩÊúâÁã¨ÁâπÁöÑÁâπÊÄßÂíåÁî®ÈÄî</li>
                        </ul>
                        
                        <h4>‚ö° Â°îÁ±ªÂûã</h4>
                        <ul>
                            <li><strong>Âü∫Á°ÄÂ°î:</strong> Âπ≥Ë°°ÁöÑÊîªÂáªÂäõÂíåÂ∞ÑÁ®ã</li>
                            <li><strong>Âä†ÂÜúÁÇÆ:</strong> È´ò‰º§ÂÆ≥Ê∫ÖÂ∞ÑÊîªÂáª</li>
                            <li><strong>ÊøÄÂÖâÂ°î:</strong> Âø´ÈÄüËøûÁª≠ÊîªÂáª</li>
                            <li><strong>ÂÜ∞ÂÜªÂ°î:</strong> ÂáèÈÄüÊïå‰∫∫ÁßªÂä®</li>
                            <li><strong>ÁãôÂáªÂ°î:</strong> Ë∂ÖËøúÂ∞ÑÁ®ãÁ≤æÁ°ÆÊâìÂáª</li>
                            <li><strong>ÊØíÊ∞îÂ°î:</strong> ÊåÅÁª≠ÊØíÁ¥†‰º§ÂÆ≥</li>
                        </ul>
                        
                        <h4>üåä Ê≥¢Ê¨°Á≥ªÁªü</h4>
                        <ul>
                            <li>ÊØèÊ≥¢Êïå‰∫∫Êï∞ÈáèÂíåÂº∫Â∫¶ÈÄíÂ¢û</li>
                            <li>ÂáªË¥•Êïå‰∫∫Ëé∑ÂæóÈáëÂ∏ÅÂ•ñÂä±</li>
                            <li>ÂêàÁêÜËßÑÂàíÈò≤Âæ°Â∏ÉÂ±Ä</li>
                        </ul>
                        
                        <h4>üí∞ ÁªèÊµéÁ≥ªÁªü</h4>
                        <ul>
                            <li>ÂáªË¥•Êïå‰∫∫Ëé∑ÂæóÈáëÂ∏Å</li>
                            <li>ÂçáÁ∫ßÂ°îÊèêÂçáÂ®ÅÂäõ</li>
                            <li>Âá∫ÂîÆÂ°îÂõûÊî∂ÈÉ®ÂàÜËµÑÈáë</li>
                        </ul>
                        
                        <h4>üéÆ Êìç‰ΩúËØ¥Êòé</h4>
                        <ul>
                            <li>Èº†Ê†áÁÇπÂáªÈÄâÊã©ÂíåÊîæÁΩÆÂ°î</li>
                            <li>ÁÇπÂáªÂ∑≤Âª∫ÈÄ†ÁöÑÂ°îÊü•ÁúãËØ¶ÊÉÖ</li>
                            <li>‰ΩøÁî®ÈÄüÂ∫¶ÊéßÂà∂Ë∞ÉËäÇÊ∏∏ÊàèËäÇÂ•è</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- ËÆæÁΩÆÂºπÁ™ó -->
        <div class="modal hidden" id="settings-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Ê∏∏ÊàèËÆæÁΩÆ</h3>
                    <button class="close-btn" id="close-settings">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="settings">
                        <div class="setting-item">
                            <label for="difficulty-select">Ê∏∏ÊàèÈöæÂ∫¶:</label>
                            <select id="difficulty-select" class="setting-select">
                                <option value="easy">ÁÆÄÂçï</option>
                                <option value="normal" selected>ÊôÆÈÄö</option>
                                <option value="hard">Âõ∞Èöæ</option>
                                <option value="nightmare">Âô©Ê¢¶</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <label for="graphics-quality">ÁîªË¥®ËÆæÁΩÆ:</label>
                            <select id="graphics-quality" class="setting-select">
                                <option value="low">‰Ωé</option>
                                <option value="medium" selected>‰∏≠</option>
                                <option value="high">È´ò</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="sound-enabled" checked>
                                ÂêØÁî®Èü≥Êïà
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="show-range" checked>
                                ÊòæÁ§∫Â°îÂ∞ÑÁ®ã
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="show-path"> ÊòæÁ§∫Ë∑ØÂæÑ
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <label>
                                Èü≥ÊïàÈü≥ÈáèÔºö
                                <input type="range" id="sound-volume" min="0" max="100" value="50">
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <label>
                                Èü≥‰πêÈü≥ÈáèÔºö
                                <input type="range" id="music-volume" min="0" max="100" value="30">
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <button class="menu-btn" id="reset-progress">
                                <i class="fas fa-trash"></i>
                                ÈáçÁΩÆËøõÂ∫¶
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÊàêÂ∞±Ê®°ÊÄÅÊ°Ü -->
    <div id="achievements-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-trophy"></i> ÊàêÂ∞±Á≥ªÁªü</h2>
                <button id="close-achievements" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="achievement-progress">
                    <div class="progress-text">
                        <span>ËøõÂ∫¶Ôºö</span>
                        <span id="achievement-progress-text">0/10 (0%)</span>
                    </div>
                    <div class="progress-bar">
                        <div id="achievement-progress-bar" class="progress-fill"></div>
                    </div>
                </div>
                <div id="achievements-list" class="achievements-list"></div>
            </div>
        </div>
    </div>

    <!-- ÊéíË°åÊ¶úÊ®°ÊÄÅÊ°Ü -->
    <div id="leaderboard-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-crown"></i> ÊéíË°åÊ¶ú</h2>
                <button id="close-leaderboard" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="leaderboard-actions">
                    <button id="export-scores" class="btn btn-secondary">
                        <i class="fas fa-download"></i> ÂØºÂá∫
                    </button>
                    <button id="clear-scores" class="btn btn-danger">
                        <i class="fas fa-trash"></i> Ê∏ÖÁ©∫
                    </button>
                </div>
                <table class="leaderboard-table">
                    <thead>
                        <tr>
                            <th>ÊéíÂêç</th>
                            <th>Áé©ÂÆ∂</th>
                            <th>ÂàÜÊï∞</th>
                            <th>Ê≥¢Êï∞</th>
                            <th>Êó•Êúü</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboard-tbody"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Á≤íÂ≠êÂÆπÂô® -->
    <div class="particles" id="particles"></div>

    <script src="audio.js"></script>
    <script src="achievements.js"></script>
    <script src="leaderboard.js"></script>
    <script src="level-editor.js"></script>
    <script src="script.js"></script>
</body>
</html>
